
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Botnology 101 â€¢ Tuition Plans</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{margin:0;background:#020708;color:#e5e7eb;font-family:system-ui,-apple-system,Segoe UI,sans-serif}
    .page{max-width:980px;margin:0 auto;padding:24px 14px}
    a{color:#bbf7d0;text-decoration:none}
    .card{border:1px solid #1f2937;border-radius:16px;padding:14px;margin:10px 0;background:rgba(5,12,10,.9)}
    button{padding:10px 14px;border-radius:999px;border:0;background:#166534;color:#fff;font-weight:600;cursor:pointer}
    button:disabled{opacity:.6;cursor:default}
    .top{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:16px}
    .muted{color:#9ca3af;font-size:.9rem}
  </style>
</head>
<body>
  <div class="page">
    <div class="top">
      <div>
        <div style="font-weight:700;">Botnology 101</div>
        <div class="muted">Tuition plans</div>
      </div>
      <div style="display:flex;gap:10px;align-items:center;">
        <a href="/">Home</a>
        <a href="/dashboard">Dashboard</a>
      </div>
    </div>

    <div class="card">
      <h3>Starter Student</h3>
      <p class="muted">Basic access.</p>
      <button class="btn-primary" onclick="startCheckout('starter')">Select Starter</button>
    </div>

    <div class="card">
      <h3>Anatomy Pro</h3>
      <p class="muted">Anatomy-first tutoring.</p>
      <button class="btn-primary" onclick="startCheckout('anatomy_pro')">Select Anatomy Pro</button>
    </div>

    <div class="card">
      <h3>Full Academy Family</h3>
      <p class="muted">Unlimited sessions.</p>
      <button class="btn-primary" onclick="startCheckout('full_academy')">Select Full Academy</button>
    </div>

    <p class="muted">If Stripe is not configured yet, checkout will show an error message (not a blank page).</p>
  </div>

  <script>
    async function startCheckout(planKey) {
      const btns = document.querySelectorAll("button.btn-primary");
      btns.forEach(b => b.disabled = true);
      try {
        const res = await fetch("/create-checkout-session", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ plan: planKey })
        });
        const data = await res.json().catch(() => ({}));
        if (!res.ok) {
          alert("Checkout error: " + (data.detail || "Unknown error"));
          btns.forEach(b => b.disabled = false);
          return;
        }
        if (data.url) window.location.href = data.url;
        else alert("No checkout URL returned.");
      } catch (e) {
        alert("Network error starting checkout.");
      }
      btns.forEach(b => b.disabled = false);
    }
  </script>
</body>
</html>
